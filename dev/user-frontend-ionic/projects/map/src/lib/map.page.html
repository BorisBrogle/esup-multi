<app-header>
  <ion-buttons slot="end">
    <ion-button (click)="presentPopover($event)" fill="clear" class="ion-no-padding">
      <ion-icon name="filter-outline"></ion-icon>
    </ion-button>

    <ion-button fill="clear" (click)="onLocateUserClick()">
      <ion-icon slot="icon-only" name="locate"></ion-icon>
    </ion-button>
  </ion-buttons>

  <ion-popover #popover [isOpen]="isOpen" (didDismiss)="isOpen = false">
    <ng-template>
      <ion-list class="filter-list">
        <ion-row class="ion-justify-content-center">
          <ion-text class="app-title-5">{{ "MAP.FILTERS" | translate }}</ion-text>
        </ion-row>
        <form [formGroup]="form">
          <ion-item formArrayName="categoriesForm" *ngFor="let category of categoriesForm.controls; let i = index">
            <ion-label class="app-text-3 light ion-text-wrap">{{ getCategoryTranslation(categories[i]) | translate }}</ion-label>
            <ion-checkbox mode="md" [formControlName]="i"></ion-checkbox>
          </ion-item>
        </form>
      </ion-list>
    </ng-template>
  </ion-popover>
</app-header>
<ion-progress-bar *ngIf="isLoading" type="indeterminate"></ion-progress-bar>

<ion-list class="chip-list" *ngIf="categoriesSelected?.length > 0">
  <ion-chip *ngFor="let category of categoriesSelected; let i = index" (click)="removeSelectedCategory(category, i)">
    {{ getCategoryTranslation(category) | translate }}
    <ion-icon name="close-circle-outline"></ion-icon>
  </ion-chip>
</ion-list>

<ion-content scroll="false">
    <div class="map-page">
      <div id="map"></div>
    </div>
</ion-content>
