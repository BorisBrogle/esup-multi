<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <app-back-button></app-back-button>
    </ion-buttons>
    <ion-title class="app-centered-header-title app-title-4">
      {{ "AUTH.MENU" | translate }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-progress-bar *ngIf="isLoading" type="indeterminate" color="primary"></ion-progress-bar>

<ion-content class="ion-padding" *ngIf="translatedPageContent$ | async as page">
  <form [formGroup]="loginForm" (ngSubmit)="submit()">
    <ion-row class="ion-justify-content-center ion-text-center">
      <div class="app-text-3" [innerHTML]="page.connexion_text"></div>
    </ion-row>

    <ion-item lines="full">
      <ion-label position="floating" class="input-label app-text-3 light">{{ 'AUTH.LOGIN.USERNAME' | translate }}</ion-label>
      <ion-input (keyup.enter)="keyboardEnter()" type="text" formControlName="username" class="form-control" id="username" required></ion-input>
      <ion-note class="app-text-5 danger" slot="error" *ngIf="username && username.errors && (username.dirty && username.touched)">
        {{ 'AUTH.LOGIN.REQUIRED.USERNAME' | translate }}
      </ion-note>
    </ion-item>

    <ion-item lines="full">
      <ion-label position="floating" class="input-label app-text-3 light">{{ 'AUTH.LOGIN.PASSWORD' | translate }}</ion-label>
      <ion-input (keyup.enter)="keyboardEnter()" class="form-control" formControlName="password" id="password"
                 required type="password"></ion-input>
      <ion-note class="app-text-5 danger" slot="error" *ngIf="password && password.errors && (password.dirty && password.touched)">
        {{ 'AUTH.LOGIN.REQUIRED.PASSWORD' | translate }}
      </ion-note>
    </ion-item>

    <ion-item lines="none">
      <ion-checkbox
        [checked]="(saveCredentialsOnAuthentication$ | async)"
        (ionChange)="onSaveCredentialsOnAuthenticationChange($event)"
        class="ion-margin-end"
        mode="md"
      >
      </ion-checkbox>
      <ion-label class="app-text-3 light ion-text-wrap">{{ 'AUTH.LOGIN.SAVE_CREDENTIALS' | translate }}</ion-label>
    </ion-item>

    <ion-row class="ion-margin-top ion-padding-horizontal ion-justify-content-center">
      <ion-button class="app-rectangle-button-1" type="submit" lines="none" [disabled]="!loginForm.valid || isLoading">
        <ion-label>{{ 'AUTH.LOGIN.SUBMIT' | translate }}</ion-label>
      </ion-button>
    </ion-row>
  </form>
</ion-content>
